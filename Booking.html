<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Wash Appointment Booking</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.x.x/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Header Section -->
    <div class="header-container">
        <div class="left-container">
            <div class="logo-container">
                <span class="logo">Mr.Bams MobileCarWash</span>
            </div>
            <h1>Try Us Now</h1>
            <p>We bring the car wash to your doorstep. Convenient, reliable, professional, and affordable car wash services.</p>
        </div>
        <div class="right-container">
            <h2>Book a Car Wash Appointment</h2>
            <p>Click the Button Below to make a Booking with Mr.Bam Mobile Car Wash.</p>
            <!-- Book Now Button -->
            <button class="service-btn" onclick="openPopup()">
                <i class="fas fa-car custom-car-icon"></i> Book Now
            </button>
        </div>
    </div>

    <!-- Popup Form -->
    <div id="popup-form" class="popup-form">
        <div class="popup-content">
            <span class="close-btn" onclick="closePopup()">Ã—</span>
            <h3>Book an Appointment</h3>
            <form id="appointment-form">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="service">Select Service:</label>
                <select id="service" name="service" required>
                    <option value="none">None</option>
                    <option value="interior">Interior Car Wash</option>
                    <option value="exterior">Exterior Car Wash</option>
                    <option value="full">Full Car Wash</option>
                </select>

                <label for="location">Location:</label>
                <input type="text" id="location" name="location" placeholder="Enter your location" required>

                <label for="date">Schedule Date:</label>
                <input type="date" id="date" name="date" required>

                <label for="time">Schedule Time:</label>
                <input type="time" id="time" name="time" required>

                <label for="message">Message:</label>
                <textarea id="message" name="message" placeholder="Additional requests..." rows="4"></textarea>

                <button type="submit">Book Appointment</button>
            </form>
        </div>
    </div>

    <script>
        // Function to open the popup form
        function openPopup() {
            document.getElementById("popup-form").style.display = "flex";
        }

        // Function to close the popup form
        function closePopup() {
            document.getElementById("popup-form").style.display = "none";
        }

        // Handle form submission
        document.getElementById("appointment-form").addEventListener("submit", function (e) {
            e.preventDefault();

            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const service = document.getElementById("service").value;
            const location = document.getElementById("location").value;
            const date = document.getElementById("date").value;
            const time = document.getElementById("time").value;
            const message = document.getElementById("message").value;

            // Generate the invoice PDF using jsPDF
            generateInvoice(name, service, location, date, time, message);
            closePopup();
        });

        function generateInvoice(name, service, location, date, time, message) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Load the company logo image as base64 or use a URL
            const logo = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA...';  // Replace this with your actual logo image base64 string

            // Add company logo to the top of the invoice
            doc.addImage(logo, 'PNG', 20, 10, 50, 20); // Adjust width and height to fit the logo properly

            doc.setFontSize(16);
            doc.text("Invoice - Mr.Bams Mobile Car Wash", 20, 40);

            doc.setFontSize(12);
            doc.text(`Name: ${name}`, 20, 50);
            doc.text(`Service: ${service}`, 20, 60);
            doc.text(`Location: ${location}`, 20, 70);
            doc.text(`Date: ${date}`, 20, 80);
            doc.text(`Time: ${time}`, 20, 90);
            doc.text(`Message: ${message}`, 20, 100);

            // Service pricing logic
            let price = 0;
            if (service === "interior") price = 300;
            else if (service === "exterior") price = 250;
            else if (service === "full") price = 500;

            doc.text(`Price: $${price}`, 20, 110);
            doc.text(`Total: $${price}`, 20, 120);

            // Add account number for payment instructions
            doc.text("Account Number for Payment: +27815130009", 20, 130);

            // Save the invoice as a PDF and offer it for download
            doc.save("invoice.pdf");

            // Notify the user that the invoice is ready for download
            alert("Booking confirmed! The invoice PDF will be downloaded.");
        }
    </script>
</body>
</html>
